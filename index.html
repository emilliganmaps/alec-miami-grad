<!DOCTYPE html>
<html>
    
<head>
    <meta charset="utf-8" />
    <title>Alec's Graduation Map</title>
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
    
    <script src="https://api.mapbox.com/mapbox-gl-js/v1.10.0/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v1.10.0/mapbox-gl.css" rel="stylesheet" />
    
    <style>
        
        body{
            margin: 0;
            padding: 0; 
        }
        
        #map{
            position: absolute;
            top: 0;
            bottom: 0;
            width: 100%; 
        }
        
    </style>
    
</head>
    
<body>
    
<div id="map"></div>
    
<script>
	mapboxgl.accessToken = 'pk.eyJ1IjoiZW1pbGxpZ2FuIiwiYSI6ImNrYTJ4NDhhdjBpOHQzZ3FraGJ3dTFuZ2kifQ.AVPBxDtMRVWFrHbNPN6sRA';
    var map = new mapboxgl.Map({
        container: 'map',   //container id
        style: 'mapbox://styles/emilligan/cka2jq4wy4rg81inw8ui81j2u',   //stylesheet location
        center: [-95.8, 39.028],    //starting position [lng, lat]
        zoom: 3.75,  //starting zoom
        minZoom: 3.75, //minimum zoom level
        maxZoom: 10.5   //maximum zoom level
    });
    
    //disable map rotation using right click + drag
    map.dragRotate.disable();

    //disable map rotation using touch rotation gesture
    map.touchZoomRotate.disableRotation();
    
    map.on('load', function() {
        map.loadImage(
            'images/miamigrad.png',
            function(error, image) {
                if (error) throw error;
                map.addImage('miami', image);
                map.addSource('point', {
                    'type': 'geojson',
                    'data': {
                        'type': 'FeatureCollection',
                        'features': [
                            {
                                'type': 'Feature',
                                'properties': {
                                    'description':
                                        '<strong>From Mom</strong><p><a href="https://youtu.be/2BxX-V3soDo" target="_blank" title="Opens in a new window">Click to see a message from Mom!</a></p>',
                                    'icon': 'miami'
                                },
                                'geometry': {
                                    'type': 'Point',
                                    'coordinates': [-88.499, 43.119]
                                    }
                            },
                            {
                                'type': 'Feature',
                                'properties': {
                                    'description':
                                        '<strong>From Carl</strong><p><a href="https://youtu.be/zJ1SfBLUa8g" target="_blank" title="Opens in a new window">Click to see a message from Carl!</a></p>',
                                    'icon': 'miami'
                                },
                                'geometry': {
                                    'type': 'Point',
                                    'coordinates': [-88.531, 43.163]
                                    }
                            },
                            {
                                'type': 'Feature',
                                'properties': {
                                    'description':
                                        '<strong>From Gagi</strong><p><a href="https://youtu.be/dZ46UrVDHHE" target="_blank" title="Opens in a new window">Click to see a message from Gagi!</a></p>',
                                    'icon': 'miami'
                                },
                                'geometry': {
                                    'type': 'Point',
                                    'coordinates': [-88.534, 43.120]
                                    }
                            },
                            {
                                'type': 'Feature',
                                'properties': {
                                    'description':
                                        '<strong>From Dad and Michele</strong><p><a href="https://youtu.be/v4WEESnGChs" target="_blank" title="Opens in a new window">Click to see a message from Dad and Michele!</a></p>',
                                    'icon': 'miami'
                                },
                                'geometry': {
                                    'type': 'Point',
                                    'coordinates': [-89.504, 43.097]
                                    }
                            },
                            {
                                'type': 'Feature',
                                'properties': {
                                    'description':
                                        '<strong>From Claire T.</strong><p><a href="https://youtu.be/EWnjBCm6I8g" target="_blank" title="Opens in a new window">Click to see a message from Claire!</a></p>',
                                    'icon': 'miami'
                                },
                                'geometry': {
                                    'type': 'Point',
                                    'coordinates': [-87.63, 41.87]
                                    }
                            },
                            {
                                'type': 'Feature',
                                'properties': {
                                    'description':
                                        '<strong>From Rob T.</strong><p><a href="https://youtu.be/BDTgtaJuxbc" target="_blank" title="Opens in a new window">Click to see a message from Rob!</a></p>',
                                    'icon': 'miami'
                                },
                                'geometry': {
                                    'type': 'Point',
                                    'coordinates': [-104.99, 39.739]
                                }
                            },
                            {
                                'type': 'Feature',
                                'properties': {
                                    'description':
                                        '<strong>From David T.</strong><p><a href="https://youtu.be/QsD6xLATJ0I" target="_blank" title="Opens in a new window">Click to see a message from David!</a></p>',
                                    'icon': 'miami'
                                },
                                'geometry': {
                                    'type': 'Point',
                                    'coordinates': [-84.466, 39.231]
                                }
                            },
                            {
                                'type': 'Feature',
                                'properties': {
                                    'description':
                                        '<strong>From Peter T.</strong><p><a href="https://miamioh.edu/commencement/index.html" target="_blank" title="Opens in a new window">Click to see a message from Peter!</a></p>',
                                    'icon': 'miami'
                                },
                                'geometry': {
                                    'type': 'Point',
                                    'coordinates': [-105.27, 40.015]
                                }
                            },
                            {
                                'type': 'Feature',
                                'properties': {
                                    'description':
                                        '<strong>From Maggie and Newton S.</strong><p><a href="https://youtu.be/5iT7IDEjM1U" target="_blank" title="Opens in a new window">Click to see a message from Maggie and Newton!</a></p>',
                                    'icon': 'miami'
                                },
                                'geometry': {
                                    'type': 'Point',
                                    'coordinates': [-87.6488, 41.9255]
                                }
                            },
                            {
                                'type': 'Feature',
                                'properties': {
                                    'description':
                                        '<strong>From Katie and Chris B.</strong><p><a href="https://youtu.be/q8zlaLxoE5I" target="_blank" title="Opens in a new window">Click to see a message from Katie and Chris!</a></p>',
                                    'icon': 'miami'
                                },
                                'geometry': {
                                    'type': 'Point',
                                    'coordinates': [-77.0369, 38.9072]
                                }
                            },
                            {
                                'type': 'Feature',
                                'properties': {
                                    'description':
                                        '<strong>From the LFs</strong><p><a href="https://youtu.be/4_yPNkdb-xY" target="_blank" title="Opens in a new window">Click to see their video message!</a></p>',
                                    'icon': 'miami'
                                },
                                'geometry': {
                                    'type': 'Point',
                                    'coordinates': [-87.8406, 42.259]
                                }
                            },
                            {
                                'type': 'Feature',
                                'properties': {
                                    'description':
                                        '<strong>From Emily L.</strong><p><a href="https://youtu.be/UIJviWd4N2o" target="_blank" title="Opens in a new window">Click to see a message from Emily!</a></p>',
                                    'icon': 'miami'
                                },
                                'geometry': {
                                    'type': 'Point',
                                    'coordinates': [-122.7163, 45.4157]
                                }
                            },
                            {
                                'type': 'Feature',
                                'properties': {
                                    'description':
                                        '<strong>From Ellie</strong><p><a href="https://youtu.be/k34ZJ43tZA0" target="_blank" title="Opens in a new window">Click to see a message from Ellie!</a></p>',
                                    'icon': 'miami'
                                },
                                'geometry': {
                                    'type': 'Point',
                                    'coordinates': [-92.9952, 44.9530]
                                }
                            },
                            {
                                'type': 'Feature',
                                'properties': {
                                    'description':
                                        '<strong>From Josh M.</strong><p><a href="https://youtu.be/1qv4YoNwgZA" target="_blank" title="Opens in a new window">Click to see a message from Josh!</a></p>',
                                    'icon': 'miami'
                                },
                                'geometry': {
                                    'type': 'Point',
                                    'coordinates': [-93.074, 45.05]
                                }
                            },
                            {
                                'type': 'Feature',
                                'properties': {
                                    'description':
                                        '<strong>From Mrs. M.</strong><p><a href="https://youtu.be/lxUQgH3_-Ug" target="_blank" title="Opens in a new window">Click to see a message from Mrs. M!</a></p>',
                                    'icon': 'miami'
                                },
                                'geometry': {
                                    'type': 'Point',
                                    'coordinates': [-97.155, 32.881]
                                }
                            },
                            {
                                'type': 'Feature',
                                'properties': {
                                    'description':
                                        '<strong>From Zach M.</strong><p><a href="https://youtu.be/FTHdtZDOJ3s" target="_blank" title="Opens in a new window">Click to see a message from Zach!</a></p>',
                                    'icon': 'miami'
                                },
                                'geometry': {
                                    'type': 'Point',
                                    'coordinates': [-96.797, 32.777]
                                }
                            },
                            {
                                'type': 'Feature',
                                'properties': {
                                    'description':
                                        '<strong>From Emily M.</strong><p><a href="https://youtu.be/hIXuw5MmVl4" target="_blank" title="Opens in a new window">Click to see a message from Emily!</a></p>',
                                    'icon': 'miami'
                                },
                                'geometry': {
                                    'type': 'Point',
                                    'coordinates': [-84.512, 39.103]
                                }
                            },
                            {
                                'type': 'Feature',
                                'properties': {
                                    'description':
                                        '<strong>From The P Family</strong><p><a href="https://youtu.be/px6SaUzJQ94" target="_blank" title="Opens in a new window">Click to see their message!</a></p>',
                                    'icon': 'miami'
                                },
                                'geometry': {
                                    'type': 'Point',
                                    'coordinates': [-88.163, 43.039]
                                }
                            },
                            {
                                'type': 'Feature',
                                'properties': {
                                    'description':
                                        '<strong>From Alayna H.</strong><p><a href="https://youtu.be/uMwuLUuqr_g" target="_blank" title="Opens in a new window">Click to see a message from Alayna!</a></p>',
                                    'icon': 'miami'
                                },
                                'geometry': {
                                    'type': 'Point',
                                    'coordinates': [-88.448, 42.315]
                                }
                            },
                            {
                                'type': 'Feature',
                                'properties': {
                                    'description':
                                        '<strong>From Collin O.</strong><p><a href="https://youtu.be/VrArMl7Wams" target="_blank" title="Opens in a new window">Click to see a message from Collin!</a></p>',
                                    'icon': 'miami'
                                },
                                'geometry': {
                                    'type': 'Point',
                                    'coordinates': [-89.073, 42.451]
                                }
                            },
                            {
                                'type': 'Feature',
                                'properties': {
                                    'description':
                                        '<strong>From Tyler S.</strong><p><a href="https://youtu.be/V95pKjWkwW8" target="_blank" title="Opens in a new window">Click to see a message from Tyler!</a></p>',
                                    'icon': 'miami'
                                },
                                'geometry': {
                                    'type': 'Point',
                                    'coordinates': [-89.01, 42.413]
                                }
                            },
                            {
                                'type': 'Feature',
                                'properties': {
                                    'description':
                                        '<strong>From Colleen & Alan B.</strong><p><a href="https://youtu.be/2P62R-BtCjI" target="_blank" title="Opens in a new window">Click to see a message from Colleen & Alan!</a></p>',
                                    'icon': 'miami'
                                },
                                'geometry': {
                                    'type': 'Point',
                                    'coordinates': [-88.008, 43.05]
                                }
                            },
                            {
                                'type': 'Feature',
                                'properties': {
                                    'description':
                                        '<strong>From Drew & Heather T.</strong><p><a href="https://youtu.be/FhDq0_UyqVM" target="_blank" title="Opens in a new window">Click to see a message from Drew & Heather!</a></p>',
                                    'icon': 'miami'
                                },
                                'geometry': {
                                    'type': 'Point',
                                    'coordinates': [-118.536, 34.201]
                                }
                            }
                        ]
                    }
                });
                map.addLayer({
                    'id': 'points',
                    'type': 'symbol',
                    'source': 'point',
                    'layout': {
                        'icon-image': 'miami',
                        'icon-size': 0.2,
                        'icon-allow-overlap': true
                    }
                });
                
                //when a click event occurs on a feature in the places layer, open a popup at the location of the feature, with description HTML from its properties.
                map.on('click', 'points', function(e) {
                    var coordinates = e.features[0].geometry.coordinates.slice();
                    var description = e.features[0].properties.description;

                    //ensure that if the map is zoomed out such that multiple copies of the feature are visible, the popup appears over the copy being pointed to.
                    while (Math.abs(e.lngLat.lng - coordinates[0]) > 180) {
                    coordinates[0] += e.lngLat.lng > coordinates[0] ? 360 : -360;
                    }

                    new mapboxgl.Popup()
                    .setLngLat(coordinates)
                    .setHTML(description)
                    .addTo(map);
                });

                //change the cursor to a pointer when the mouse is over the places layer.
                map.on('mouseenter', 'places', function() {
                    map.getCanvas().style.cursor = 'pointer';
                });

                //change back to pointer
                map.on('mouseleave', 'places', function() {
                    map.getCanvas().style.cursor = '';
                });
            }
        );
    });
</script>

</body>
</html>